<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Press Updates</title>
</head>
<body>
    
    <h1>Press</h1>
      
    <Form id="firstNews">
        <h2>Update first News</h2>
        <input type="text" placeholder="Enter Reporter" name="reporter">
        <input type="text" placeholder="Enter Headline" name="headline">
        <input type="text" placeholder="Enter Date e.g 12 JAN, 2024" name="upload">
        <div class="inputBox">
            <textarea placeholder="Enter First News Information" name="info"></textarea>
            <span></span>
        </div>
        <button>Update first News</button>
    </Form>

    <Form id="secondNews">
        <h2>Update Second News</h2>
        <input type="text" placeholder="Enter Reporter" name="reporter">
        <input type="text" placeholder="Enter Headline" name="headline">
        <input type="text" placeholder="Enter Date e.g 12 JAN, 2024" name="upload">
        <div class="inputBox">
            <textarea placeholder="Enter First News Information" name="info"></textarea>
            <span></span>
        </div>
        <button>Update Second News</button>
    </Form>

    <Form id="thirdNews">
        <h2>Update Third News</h2>
        <input type="text" placeholder="Enter Reporter" name="reporter">
        <input type="text" placeholder="Enter Headline" name="headline">
        <input type="text" placeholder="Enter Date e.g 12 JAN, 2024" name="upload">
        <div class="inputBox">
            <textarea placeholder="Enter First News Information" name="info"></textarea>
            <span></span>
        </div>
        <button>Update Third News</button>
    </Form>

    <form id="firstBlog">
        <h2>Update First Blog </h2>
        <input type="text" placeholder="Enter Reporter" name="blogger">
        <input type="text" placeholder="Enter Headline" name="headline">
        <input type="text" placeholder="Enter Date e.g 12 JAN, 2024" name="upload">
        <div class="inputBox">
            <textarea placeholder="Enter First News Information" name="info"></textarea>
            <span></span>
        </div>
        <button>Update First Blog</button>
    </form>

    <form id="lastBlog">
        <h2>Update Last Blog </h2>
        <input type="text" placeholder="Enter Reporter" name="blogger">
        <input type="text" placeholder="Enter Headline" name="headline">
        <input type="text" placeholder="Enter Date e.g 12 JAN, 2024" name="upload">
        <div class="inputBox">
            <textarea placeholder="Enter First News Information" name="info"></textarea>
            <span></span>
        </div>
        <button>Update Last Blog</button>
    </form>

    <dialog id="myModal">
      <h2>Update Sucessfull</h2>
      <button id="close">Close</button>
   </dialog>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { doc,getDocs,getDoc,getFirestore,collection,onSnapshot,serverTimestamp,addDoc,updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
                

        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        // This is the firebase project ID.
          const firebaseConfig = {
            apiKey: "AIzaSyBh6G23R0jLlMgHzBnwoj6EmFXP1wCgQbI",
            authDomain: "tickets-6848f.firebaseapp.com",
            projectId: "tickets-6848f",
            storageBucket: "tickets-6848f.appspot.com",
            messagingSenderId: "56292073441",
            appId: "1:56292073441:web:a429c5383c3ec09fcebca0",
            measurementId: "G-77DG9Q8DVL"
                                            };

            // Initialize Firebase
            const app = initializeApp(firebaseConfig);
            const analytics = getAnalytics(app);
            const db = getFirestore(app);

            function openModal() {
                  var dialog = document.getElementById("myModal");
                      dialog.showModal(); // Open as a modal dialog
                        }
               document.getElementById("close").addEventListener("click", function() {
               document.getElementById("myModal").close();
              });
            
            //These varibles store data from HTML tag with the given IDs. 
            const first_news= document.getElementById("firstNews");
            const second_news= document.getElementById("secondNews");
            const third_news= document.getElementById("thirdNews");
            const first_blog= document.getElementById("firstBlog");
            const last_blog= document.getElementById("lastBlog");

            //This event Listener is triggered by a submit.
 
            first_news.addEventListener("submit",(e)=>{
                 e.preventDefault()
                // This variable get the values from user input.
                 var reporterName = first_news.reporter.value;
                 var headline = first_news.headline.value;
                 var info = first_news.info.value;
                 const currentDate = first_news.upload.value;
                // this variable stores a specific document (Record) reference with an ID of news 1. 
                 const firstlatestNews = doc(db,"LatestNews","news 1");
                // This function updates the database.
                  updateDoc(firstlatestNews,
                    {
                        Blogger:reporterName,
                        Headline:headline,
                        info:info,
                        dateUploaded:currentDate
                    }
                                            
                     ).then(()=>{
                      openModal();
                    }).catch((error)=>{
                      console.log(error);
                    });
                    });
                // This event listener follows the same logic as the above event Listener.
                // The same applies to the ones that come after event Listener. 
                second_news.addEventListener("submit",(e)=>{
                 e.preventDefault()

                 var reporterName = second_news.reporter.value;
                 var headline = second_news.headline.value;
                 var info = second_news.info.value;
                 const currentDate = second_news.upload.value;
                
                 const secondlatestNews = doc(db,"LatestNews","news 2");

                  updateDoc(secondlatestNews,
                    {
                        Blogger:reporterName,
                        Headline:headline,
                        info:info,
                        dateUploaded:currentDate
                        
                    }
                                            
                     ).then(()=>{
                      openModal();
                    }).catch((error)=>{
                      console.log(error);
                    });
                    });
                    
                    third_news.addEventListener("submit",(e)=>{
                 e.preventDefault()

                 var reporterName = third_news.reporter.value;
                 var headline = third_news.headline.value;
                 var info = third_news.info.value;
                 const currentDate = third_news.upload.value;
                
                 const lastlatestNews = doc(db,"LatestNews","news 3");

                  updateDoc(lastlatestNews,
                    {
                        Blogger:reporterName,
                        Headline:headline,
                        info:info,
                        dateUploaded:currentDate
                    }
                                            
                     ).then(()=>{
                      openModal();
                    }).catch((error)=>{
                      console.log(error);
                    });
                    });

                    first_blog.addEventListener("submit",(e)=>{
                 e.preventDefault()

                 var bloggerName = first_blog.blogger.value;
                 var headline = first_blog.headline.value;
                 var info = first_blog.info.value;
                 const currentDate = first_blog.upload.value;
                
                 const newfirstBlog = doc(db,"Blog","Blog 1");

                  updateDoc(newfirstBlog,
                    {
                        Blogger:bloggerName,
                        Headline:headline,
                        info:info,
                        dateUploaded:currentDate
                        
                    }
                                            
                     ).then(()=>{
                      openModal();
                    }).catch((error)=>{
                      console.log(error);
                    });
                    });

                    last_blog.addEventListener("submit",(e)=>{
                 e.preventDefault()

                 var bloggerName =  last_blog.blogger.value;
                 var headline =  last_blog.headline.value;
                 var info =  last_blog.info.value;
                 const currentDate = last_blog.upload.value;
                
                 const lastlatestNews = doc(db,"Blog","Blog 2");

                  updateDoc(lastlatestNews,
                    {
                        Blogger:bloggerName,
                        Headline:headline,
                        info:info,
                        dateUploaded:currentDate
                    }
                                            
                     ).then(()=>{
                      openModal();
                    }).catch((error)=>{
                      console.log(error);
                    });
                    });





            


  </script>
   
    
</body>
</html>