<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authenticate Admin</title>
</head>
<body> <h2>Sign into the admin Dashboard for Mzuni tickets.</h2>
    <form id="signIn">
        <label>Email</label>
        <input type="email" placeholder="Enter Email" name="adminEmail" autocomplete="false">
        <label>Password</label>
        <input type="password" placeholder="Enter Email" name="adminPassword">
        <button>Sign in</button>
    </form>

    <script type="module">
          import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
          import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
          import { getAuth,signInWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
                  

          // TODO: Add SDKs for Firebase products that you want to use
          // https://firebase.google.com/docs/web/setup#available-libraries

          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          // This is the firebase project ID.
            const firebaseConfig = {
              apiKey: "AIzaSyBh6G23R0jLlMgHzBnwoj6EmFXP1wCgQbI",
              authDomain: "tickets-6848f.firebaseapp.com",
              projectId: "tickets-6848f",
              storageBucket: "tickets-6848f.appspot.com",
              messagingSenderId: "56292073441",
              appId: "1:56292073441:web:a429c5383c3ec09fcebca0",
              measurementId: "G-77DG9Q8DVL"
                                              };

              // Initialize Firebase
              const app = initializeApp(firebaseConfig);
              //initialize authentication function in firebase.
              const auth = getAuth(app);
              // variable that gets the data fri=om id called signIn.
              const adminlogin = document.getElementById("signIn");

               adminlogin.addEventListener("submit",(e)=>{
                 e.preventDefault()

                 var email = adminlogin.adminEmail.value;
                 var password = adminlogin.adminPassword.value;
                // function for signing in with email and password.
                // which sends a verification token to firebase to verify user. 

                signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    // Signed in 
                    // This variable stores user credentials
                    const user = userCredential.user;
                    console.log("Signed in" + user);
                    // upon successful login it send user to admin dashboard.
                    window.location.href = 'admin.html';
                })
                .catch(() => {
                    console.log("Try Again");
                });
             })
             



    </script>
    
</body>
</html>